(this["webpackJsonpvroom-viewer"]=this["webpackJsonpvroom-viewer"]||[]).push([[0],{56:function(e,t,n){e.exports=n(92)},65:function(e,t,n){},68:function(e,t,n){},69:function(e,t,n){},85:function(e,t,n){},86:function(e,t,n){},88:function(e,t,n){},90:function(e,t,n){},91:function(e,t,n){},92:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(12),l=n.n(c),i=n(26),o=n(33),u=n(23),s=(n(65),n(6)),h=n(18),v=n(19),d=n(21),f=n(20),p=n(22),m=n(24),y=n(54),E=n(55),b=n(17),g=n(38),k=n.n(g),S=n(53),O=n(27),j=n.n(O),C=360,F=0,w=100,A=80,D=70,N=40,V=25;function T(e){var t,n,a,r=function(e,t){var n=e.hue,a=e.sat,r=e.lit,c=t.cHue,l=t.cSat,i=t.cLit;return Math.abs(n-c)+Math.abs(a-l)+Math.abs(r-i)>V},c=e.map((function(e){var t=e.split(","),n=Object(m.a)(t,3),a=n[0],r=n[1],c=n[2];return{hue:Number.parseInt(a.split("hsl(")[1]),sat:Number.parseInt(r),lit:Number.parseInt(c)}}));do{t=Math.floor(Math.random()*(C-F)+F),n=Math.floor(Math.random()*(w-A)+A),a=Math.floor(Math.random()*(D-N)+N)}while(!c.every((function(e){return r(e,{cHue:t,cSat:n,cLit:a})})));return"hsl(".concat(t,", ").concat(n,"%, ").concat(a,"%)")}var I=n(30),W=n.n(I),P=5,B=Array.from({length:4},(function(e,t){return"Week ".concat(t+1)})),_=["Mon","Tue","Wed","Thu","Fri"];function H(e){var t=e/60/60,n=t/24,a=n/P;n>1&&(t%=24),a>1&&(n%=P);var r=B[Math.floor(a)],c=_[Math.floor(n)],l="".concat(W.a.duration(t,"hours").hours(),"h").concat(W.a.duration(t,"hours").minutes(),"m");return"".concat(r,", ").concat(c," - ").concat(l)}function R(e){if(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])return _[Math.floor(e%P)];var t=e/60/60/24;return t/P>1&&(t%=P),_[Math.floor(t)]}n(68);var L={control:function(e){return Object(s.a)({},e,{backgroundColor:"white"})},option:function(e,t){var n=t.data,a=t.isDisabled,r=t.isFocused,c=t.isSelected,l=j()(n.color);return Object(s.a)({},e,{backgroundColor:a?null:c?n.color:r?l.alpha(.1).css():null,color:a?"#ccc":c?j.a.contrast(l,"white")>2?"white":"black":n.color,cursor:a?"not-allowed":"default",":active":Object(s.a)({},e[":active"],{backgroundColor:!a&&(c?n.color:l.alpha(.3).css())})})},multiValue:function(e,t){var n=t.data,a=j()(n.color);return Object(s.a)({},e,{backgroundColor:a.alpha(.1).css()})},multiValueLabel:function(e,t){var n=t.data;return Object(s.a)({},e,{color:n.color})},multiValueRemove:function(e,t){var n=t.data;return Object(s.a)({},e,{color:n.color,":hover":{backgroundColor:n.color,color:"white"}})}},x=function(e){var t=e.data,n=e.colors,a=e.isActive,c=e.title,l=e.onChange,i=e.getDaysByVehicles,o=e.getWeeksByVehicles,u=t.map((function(e,t){return{value:t,color:Array.isArray(e)?n.find((function(t,n){return e.includes(n)})):n[t],label:"".concat(t+1," \n      ").concat(i?"".concat(R(i([e.vehicle])[0])):"","\n      ").concat(o?"W".concat(o([e.vehicle])[0]+1):"")}}));return r.a.createElement("div",{className:"ButtonSelect"},r.a.createElement("span",{onClick:function(){return l(t.map((function(e,t){return t})))},className:"ButtonSelect-Title ".concat(a&&"active")},c),r.a.createElement(S.a,{styles:L,isMulti:!0,name:c,options:u,onChange:function(e){return l(e&&e.length>0?e.map((function(e){return e.value})):t.map((function(e,t){return t})))}}))},M=(n(69),function(e){return r.a.createElement(a.Fragment,null,r.a.createElement("input",{id:"file",className:"FileInput",name:"file",type:"file",onChange:function(t){return e.clickHandler(t.target.files[0])}}),r.a.createElement("label",{htmlFor:"file"},e.text))}),U=n(48),Y=(n(85),function(e){function t(){var e,n;Object(h.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(d.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={isOpen:!1,features:[],active:null},n._selectActive=function(e){n.setState({active:e})},n._resolveHost=function(e){var t=n.props,a=t.hosts,r=t.vehicles,c=a.reduce((function(t,n,a){return n.host===e&&t.push(Object(s.a)({},n,{originalId:a})),t}),[]),l=c.reduce((function(e,t){var n,a=r.find((function(e){return-1!==(n=e.steps.findIndex((function(e){return"job"===e.type&&e.job===t.originalId})))}));return e.push({vehicle:a.vehicle,time:H(a.steps[n].arrival)}),e}),[]);return Object(s.a)({},c[0],{routes:l})},n}return Object(p.a)(t,e),Object(v.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.activeFeatures,c=t.vehicles,l=t.hosts,i=t.setActiveFeatures,o=this.state,u=o.active,h=o.features,v=o.isOpen,d=null!==u&&Object(s.a)({},h[u],{},"vehicle"===h[u].type?Object(s.a)({id:h[u].id+1},c[h[u].id]):this._resolveHost(h[u].id));return r.a.createElement(U.slide,{customBurgerIcon:!1,isOpen:this.state.isOpen,pageWrapId:"main-content",outerContainerId:"App",onStateChange:function(e){return!e.isOpen&&i()},noOverlay:!0,right:!0},n&&n.length>1?r.a.createElement("ul",null,n.map((function(t,n){return r.a.createElement("li",{key:n,className:"FeatureLink ".concat(u===n?"active":""),onClick:function(){return e._selectActive(n)}},t.type," - ",t.id+1)}))):null,d&&v?r.a.createElement(a.Fragment,null,r.a.createElement("h1",null,r.a.createElement("span",{className:"SideBar-Title"},d.type),d.id),r.a.createElement("div",{className:"SideBar-Stats"},"vehicle"===d.type?r.a.createElement(a.Fragment,null,r.a.createElement("span",null,r.a.createElement("b",null,"Hosts:")," ",d.steps.length-2),r.a.createElement("span",null,r.a.createElement("b",null,"Capacity:")," ",d.pickup[0]," / 21")):r.a.createElement(a.Fragment,null,r.a.createElement("span",null,r.a.createElement("b",null,"# Containers")," ",d.nContainers),r.a.createElement("span",null,r.a.createElement("b",null,"Freq:")," ",d.perMonth,7===d.perMonth?".".concat(d.perWeek):null),r.a.createElement("span",null,r.a.createElement("b",null,"# Pickups:")," ",d.nPickups))),r.a.createElement("h3",null,"Routes: "),r.a.createElement("ul",null,"vehicle"===d.type?d.steps.map((function(e,t){var n="job"===e.type&&l[e.job],c=n.host,o=n.pickup,u=n.perMonth,s=n.perWeek,h=n.nContainers,v=n.nPickups;return r.a.createElement("li",{key:t,className:"Feature"},"job"!==e.type?r.a.createElement(a.Fragment,null,r.a.createElement("div",{className:"Feature-Title"},e.type),r.a.createElement("small",null,r.a.createElement("b",null,"Arrival: "),H(e.arrival))):r.a.createElement(a.Fragment,null,r.a.createElement("div",{className:"Feature-Title FeatureLink",onClick:function(){return"job"===e.type&&i([{type:"host",id:c}])}},c,r.a.createElement("small",null,u,7===u?".".concat(s):null)),r.a.createElement("small",null,r.a.createElement("b",null,"# Containers: "),h),r.a.createElement("br",null),r.a.createElement("small",null,r.a.createElement("b",null,"Pickup Nr: "),o+1," / ",v),r.a.createElement("br",null),r.a.createElement("small",null,r.a.createElement("b",null,"Arrival: "),H(e.arrival))))})):d.routes.map((function(e,t){var n=e.vehicle,a=e.time;return r.a.createElement("li",{className:"Feature",key:t},r.a.createElement("div",{className:"Feature-Title FeatureLink",onClick:function(){return i([{type:"vehicle",id:n}])}},"Vehicle ",n+1),r.a.createElement("small",null,a))})))):null)}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n,a,r=e.activeFeatures,c=t.features;return r&&0===r.length?{isOpen:!1,features:[],active:null}:(a=c,(n=r)&&a&&n.some((function(e){return void 0===a.find((function(t){return t.id===e.id&&t.type===e.type}))}))?{features:r,isOpen:!0,active:r.length>1?null:0}:null)}}]),t}(a.Component)),z=Object(a.memo)((function(e){var t=e.data,n=e.type,a=e.clickHandler;e.hoverHandler;return t.map((function(e,t){var c=e.color,l=e.host,i=e.latitude,o=e.longitude,u=e.order,h={cursor:"pointer",fill:c||"depot"===n&&"#FF0000"||"#000000",fontSize:"12px",textAnchor:"middle",strokeWidth:1,strokeLinejoin:"round",transform:"translate(".concat(-10,"px,").concat(-20,"px)")};h.stroke="#000000"===h.fill?"white":"black";var v=j()(h.fill).luminance()>.6?"#000":"#fff";return r.a.createElement(b.b,{key:"marker-".concat(n,"-").concat(l||t),longitude:o,latitude:i},r.a.createElement("svg",{style:Object(s.a)({},h),height:20,viewBox:"0 0 ".concat(24," ").concat(24),onClick:"depot"!==n?function(){return a([{type:n,id:l}])}:null},r.a.createElement("path",{d:"M20.2,15.7L20.2,15.7c1.1-1.6,1.8-3.6,1.8-5.7c0-5.6-4.5-10-10-10S2,4.5,2,10c0,2,0.6,3.9,1.6,5.4c0,0.1,0.1,0.2,0.2,0.3\n  c0,0,0.1,0.1,0.1,0.2c0.2,0.3,0.4,0.6,0.7,0.9c2.6,3.1,7.4,7.6,7.4,7.6s4.8-4.5,7.4-7.5c0.2-0.3,0.5-0.6,0.7-0.9\n  C20.1,15.8,20.2,15.8,20.2,15.7z"}),r.a.createElement("text",{x:"50%",y:"50%",stroke:v},"depot"===n?"D":u)))}))}),(function(e,t){var n=e.prevData,a=e.prevType,r=t.curData,c=t.curType;return e&&t&&n&&r&&a===c&&n.length===r.length})),J=(n(86),n(87),{id:"data",type:"line",source:"routes",paint:{"line-width":3,"line-color":["get","color"]}}),q={id:"dataInactive",type:"line",beforeId:"data",source:"routesInactive",paint:{"line-width":3,"line-color":"#000000"}},G={id:"dataBorder",beforeId:"data",type:"line",source:"routes",paint:{"line-width":5,"line-color":"#000000"}},K=function(e){function t(){var e,n;Object(h.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(d.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={activeVehicles:[],routes:null,routesInactive:null,hosts:[],hostsInactive:[],depot:null,hoveredFeature:null,mapStyle:{version:8,sources:{"raster-tiles":{type:"raster",tiles:["".concat(window.location.protocol,"//tile.osm.org/{z}/{x}/{y}.png")],tileSize:256}},layers:[{id:"test",type:"raster",source:"raster-tiles",minzoom:0,maxzoom:22}]},viewport:{latitude:40,longitude:-7,zoom:4,bearing:0,pitch:0}},n._handleViewportChange=function(e){e.width,e.height;var t=Object(E.a)(e,["width","height"]);return n.setState({viewport:Object(s.a)({},n.state.viewport,{},t)})},n._onHover=function(e){var t=e.features,a=e.srcEvent,r=a.offsetX,c=a.offsetY,l=t&&t.reduce((function(e,t){return"data"!==t.layer.id&&"dataInactive"!==t.layer.id||void 0!==e.find((function(e){return e.properties.vehicle===t.properties.vehicle}))||e.push(t),e}),[]);n.setState({hoveredFeatures:l,x:r,y:c})},n._onClick=function(e){var t=e.features,a=n.props.setActiveFeatures,r=t&&t.filter((function(e){return"data"===e.layer.id||"dataInactive"===e.layer.id}));r?a(r.map((function(e){return{type:"vehicle",id:e.properties.vehicle}}))):a()},n._getCursor=function(e){var t=e.isDragging,n=e.isHovering;return t?"grabbing":n?"pointer":"default"},n}return Object(p.a)(t,e),Object(v.a)(t,[{key:"_renderTooltip",value:function(){var e=this.state,t=e.hoveredFeatures,n=e.x,a=e.y;return t&&t.length?r.a.createElement("div",{className:"Tooltip",style:{left:n,top:a}},t.length>1&&r.a.createElement("div",null,"Count: ",t.length),r.a.createElement("div",null,"Vehicles: "),r.a.createElement("div",{className:"Tooltip-VehicleHolder"},t.map((function(e,t){return r.a.createElement("span",{key:t},e.properties.vehicle+1)})))):null}},{key:"render",value:function(){var e=this.state,t=e.mapStyle,n=e.routes,a=e.routesInactive,c=e.viewport,l=e.hosts,i=e.hostsInactive,o=e.depot,u=this.props,s=u.setActiveFeatures,h=u.showAllRoutes;return r.a.createElement("div",{id:"map"},r.a.createElement(b.d,Object.assign({mapStyle:t,height:"100%",width:"100%",interactiveLayerIds:[J.id].concat(Object(y.a)(h?[q.id]:[])),onViewportChange:this._handleViewportChange,onHover:this._onHover,onClick:this._onClick,getCursor:this._getCursor},c),r.a.createElement(b.c,{id:"routes",type:"geojson",data:n},r.a.createElement(b.a,J),r.a.createElement(b.a,G)),h?r.a.createElement(b.c,{id:"routesInactive",type:"geojson",data:a},r.a.createElement(b.a,q)):null,o?r.a.createElement(z,{data:[o],type:"depot"}):null,h?r.a.createElement(z,{data:i,type:"inactive",clickHandler:s}):null,r.a.createElement(z,{data:l,type:"host",clickHandler:s}),this._renderTooltip()))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n,a,r=t.activeVehicles,c=e.activeVehicles,l=e.activeFilter,i=e.vehicleColors,o=e.vehicles,u=e.vehiclesPerDay,h=e.vehiclesPerWeek,v=e.hosts;if(c&&c.length>0&&o&&o.length>0&&(a=r,(n=c).length!==a.length||!n.every((function(e){return a.includes(e)})))){var d=[],f=[],p=[],y=[],E=Object(m.a)(o[0].steps[0].location,2),b={longitude:E[0],latitude:E[1]};o.forEach((function(e,t){var n=e.steps,a=e.vehicle;c.includes(t)?(d.push(e),n.forEach((function(e,t){var n=e.job;return void 0!==n&&p.push({job:n,vehicle:a,order:t})}))):(f.push(e),n.forEach((function(e){var t=e.job;return void 0!==t&&y.push({job:t,vehicle:a})})))}));var g={type:"FeatureCollection",features:d.map((function(e){return{type:"Feature",geometry:k.a.toGeoJSON(e.geometry),properties:{vehicle:e.vehicle,color:i[e.vehicle][l],day:u.findIndex((function(t){return t.includes(e.vehicle)})),week:h.findIndex((function(t){return t.includes(e.vehicle)}))}}}))},S={type:"FeatureCollection",features:f.map((function(e){return{type:"Feature",geometry:k.a.toGeoJSON(e.geometry),properties:{vehicle:e.vehicle,day:u.findIndex((function(t){return t.includes(e.vehicle)})),week:h.findIndex((function(t){return t.includes(e.vehicle)}))}}}))},O=p.reduce((function(e,t){var n=t.job,a=t.order,r=t.vehicle,c=v[n];return void 0===e.find((function(e){return e.host===c.host}))&&e.push(Object(s.a)({},c,{color:i[r][l],order:a})),e}),[]),j=y.reduce((function(e,t){var n=t.job,a=v[n];return void 0===e.find((function(e){return e.host===a.host}))&&e.push(Object(s.a)({},a,{color:"#000000"})),e}),[]);return{activeVehicles:c,depot:b,routes:g,routesInactive:S,hosts:O,hostsInactive:j}}return null}}]),t}(a.PureComponent),X=(n(88),r.a.createElement("p",null,"Loading...")),Q=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=e.filter((function(e){return t.includes(e.vehicle)})),r=a.sort((function(e,t){var n=e.steps,a=t.steps;return n[0].arrival-a[0].arrival}))[0],c=a.sort((function(e,t){var n=e.steps,a=t.steps;return a[a.length-1].arrival-n[n.length-1].arrival}))[0];if(!r||!c)return 0;var l=n?c.steps[c.steps.length-1]:r.steps[0],i=l.arrival;return i},Z=function(e){var t=e.loadSolution,n=e.clearSolution,c=e.solutionStatus,l=e.vehiclesPerDay,i=e.vehiclesPerWeek,u=e.vehicles,s=(e.vehiclesByDays,e.vehiclesByWeeks,e.getDaysByVehicles),h=e.getWeeksByVehicles,v=e.setDays,d=e.setVehicles,f=e.setWeeks,p=e.setShowRoutes,m=e.activeFilter,y=e.activeVehicles,E=(e.activeDays,e.activeWeeks,e.showAllRoutes),b=e.vehicleColors;return r.a.createElement("header",{className:"NavBar"},"EMPTY"===c&&function(e){return r.a.createElement(a.Fragment,null,r.a.createElement(M,{text:"Load Solution",clickHandler:e}))}(t)||"LOADING"===c&&X||r.a.createElement(a.Fragment,null,r.a.createElement("div",{className:"NavBar-Controls"},r.a.createElement(x,{title:"Weeks",isActive:"WEEK"===m,data:i,colors:b.map((function(e){return e.WEEK})),onChange:f}),r.a.createElement(x,{title:"Days",isActive:"DAY"===m,data:l,colors:b.map((function(e){return e.DAY})),onChange:v}),r.a.createElement(x,{title:"Vehicles",isActive:"VEHICLE"===m,data:u,colors:b.map((function(e){return e.VEHICLE})),onChange:d,getWeeksByVehicles:h,getDaysByVehicles:s}),r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("label",null,r.a.createElement("input",{name:"showAllRoutes",type:"checkbox",checked:E,onChange:function(e){var t=e.target;return p(t.checked)}}),"Show inactive routes")),r.a.createElement(o.b,{to:"/table",target:"_blank",style:{textDecoration:"none"}},r.a.createElement("button",null,"Schedule Table")),r.a.createElement("button",{onClick:n},"Clear Solution"))),r.a.createElement("div",{className:"NavBar-Stats"},r.a.createElement("span",{className:"NavBar-StatsField"},r.a.createElement("label",null,"Vehicles:"),r.a.createElement("span",null,y.length)),r.a.createElement("span",{className:"NavBar-StatsField"},r.a.createElement("label",null,"Distance:"),r.a.createElement("span",null,"".concat(function(e,t){return e.filter((function(e){return t.includes(e.vehicle)})).reduce((function(e,t){return e+t.distance}),0)}(u,y)/1e3," Km"))),r.a.createElement("span",{className:"NavBar-StatsField"},r.a.createElement("label",null,"Capacity:"),r.a.createElement("span",null,function(e,t){return e.filter((function(e){return t.includes(e.vehicle)})).reduce((function(e,t){return e+t.pickup[0]}),0)}(u,y))),r.a.createElement("span",{className:"NavBar-StatsField"},r.a.createElement("label",null,"Hosts:"),r.a.createElement("span",null,function(e,t){return e.filter((function(e){return t.includes(e.vehicle)})).reduce((function(e,t){return e+t.steps.length-2}),0)}(u,y))),r.a.createElement("span",{className:"NavBar-StatsField"},r.a.createElement("label",null,"Start:"),r.a.createElement("span",null,H(Q(u,y)))),r.a.createElement("span",{className:"NavBar-StatsField"},r.a.createElement("label",null,"End:"),r.a.createElement("span",null,H(Q(u,y,!0)))),r.a.createElement("span",{className:"NavBar-StatsField"},r.a.createElement("label",null,"Duration:"),r.a.createElement("span",null,function(e,t){var n=e.filter((function(e){return t.includes(e.vehicle)})).reduce((function(e,t){return e+t.duration}),0),a=W.a.duration(n,"s"),r=a.days(),c=a.hours(),l=a.minutes();return"".concat(r?r+"d":""," ").concat(c?c+"h":""," ").concat(l?l+"m":"")}(u,y))))))},$=n(13),ee=function(e,t){return e.vehiclesPerWeek.filter((function(e,n){return t.includes(n)})).flat()},te=function(e,t){return e.vehiclesPerDay.filter((function(e,n){return t.includes(n)})).flat()},ne=function(e,t){var n=new Set(t.map((function(t){return Number.parseInt(e.vehiclesPerDay.findIndex((function(e){return e.includes(t)})))})));return Array.from(n)},ae=function(e,t){var n=new Set(t.map((function(t){return e.vehiclesPerWeek.findIndex((function(e){return e.includes(t)}))})));return Array.from(n)},re="WEEK",ce="DAY",le="VEHICLE",ie=function(e,t,n,a){return{type:"SET_FILTER",payload:{activeDays:e,activeWeeks:t,activeFilter:n,activeVehicles:a}}},oe=function(e){return function(t){return t({type:"SET_SHOW_ROUTES",payload:{showAllRoutes:e}})}},ue=function(e){return function(t){return t({type:"SET_ACTIVE_FEATURES",payload:e})}},se=function(e){return function(t,n){var a=ee(n().solution,e),r=function(e){return e.flatMap((function(e){return Array.from({length:P},(function(t,n){return n+5*e}))}))}(e);return t(ie(r,e,re,a))}},he=function(e){return function(t,n){var a=te(n().solution,e),r=function(e){return Array.from(new Set(e.map((function(e){return Math.floor(e/P)}))))}(e);return t(ie(e,r,ce,a))}},ve=function(e){return function(t,n){var a=le,r=ne(n().solution,e),c=ae(n().solution,e);return t(ie(r,c,a,e))}},de="EMPTY",fe="LOADING",pe="DONE",me=function(e){return{type:"SET_STATUS",payload:e}},ye=function(e){return function(t){return t(me({status:fe})),(n=e,new Promise((function(e,t){var a=new FileReader;a.onerror=function(){a.abort(),t("Problem parsing input file")},a.onload=function(){e(JSON.parse(a.result))},a.readAsText(n)}))).then((function(e){var n=e.vroom,a=e.meta,r=n.output.routes,c=a.hosts,l=a.vehiclesPerDay,i=a.vehiclesPerWeek;return t(function(e,t,n){return function(a){var r=t.reduce((function(e,t){return e.push(T(e)),e}),[]),c=e.reduce((function(e,t){return e.push(T(e)),e}),[]);return a({type:"SET_VEHICLE_COLORS",payload:{vehicleColors:Array.from({length:n},(function(e,t){return t})).reduce((function(n,a){var l,i=t.findIndex((function(e){return e.includes(a)})),o=e.findIndex((function(e){return e.includes(a)}));return n.push((l={},Object($.a)(l,ce,c[o]),Object($.a)(l,re,r[i]),Object($.a)(l,le,T(n.map((function(e){return e.VEHICLE})))),l)),n}),[])}})}}(l,i,r.length)),t(se(i.map((function(e,t){return t})))),t({type:"LOAD_SOLUTION",payload:{hosts:c,vehicles:r,vehiclesPerDay:l,vehiclesPerWeek:i}})})).catch((function(e){return console.error(e),t(me(de))}));var n}},Ee=(n(90),function(e){function t(){var e,n;Object(h.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(d.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={},n}return Object(p.a)(t,e),Object(v.a)(t,[{key:"render",value:function(){var e=this.props,t=e.settings,n=e.solution,a=e.loadSolution,c=e.clearSolution,l=e.setDays,i=e.setVehicles,o=e.setWeeks,u=e.setShowRoutes,s=e.setActiveFeatures,h=n.status,v=n.vehiclesPerDay,d=n.vehiclesPerWeek,f=n.vehicles,p=n.hosts,m=n.getVehiclesByDays,y=n.getVehiclesByWeeks,E=n.getDaysByVehicles,b=n.getWeeksByVehicles,g=t.activeFeatures,k=t.activeVehicles,S=t.activeFilter,O=t.activeDays,j=t.activeWeeks,C=t.showAllRoutes,F=t.vehicleColors;return r.a.createElement("div",{id:"App",className:"App"},null!==g?r.a.createElement(Y,{hosts:p,activeFeatures:g,vehicles:f,setActiveFeatures:s}):null,r.a.createElement("div",{id:"main-content"},r.a.createElement(Z,{solutionStatus:h,loadSolution:a,clearSolution:c,setDays:l,setVehicles:i,setWeeks:o,setShowRoutes:u,getVehiclesByDays:m,getVehiclesByWeeks:y,getDaysByVehicles:E,getWeeksByVehicles:b,vehiclesPerDay:v,vehiclesPerWeek:d,vehicles:f,activeFilter:S,activeDays:O,activeWeeks:j,activeVehicles:k,showAllRoutes:C,vehicleColors:F}),r.a.createElement(K,{activeFilter:S,activeVehicles:k,showAllRoutes:C,vehicles:f,hosts:p,vehicleColors:F,vehiclesPerDay:v,vehiclesPerWeek:d,setActiveFeatures:s})))}}]),t}(a.Component)),be=Object(i.b)((function(e,t){var n=e.settings,a=e.solution;return{settings:n,solution:Object(s.a)({getVehiclesByDays:function(t){return te(e,t)},getVehiclesByWeeks:function(t){return ee(e,t)},getDaysByVehicles:function(e){return ne(a,e)},getWeeksByVehicles:function(e){return ae(a,e)}},a)}}),(function(e,t){return{setVehicles:function(t){return e(ve(t))},setWeeks:function(t){return e(se(t))},setDays:function(t){return e(he(t))},setActiveFeatures:function(t){return e(ue(t))},setShowRoutes:function(t){return e(oe(t))},loadSolution:function(t){return e(ye(t))},clearSolution:function(){return e((function(e){return e({type:"CLEAR_SOLUTION"})}))}}}))(Ee),ge=n(50),ke=n(52);n(91);function Se(){var e=Object(ge.a)(["\n      ","\n      Host: ","\n      Freq: ","\n    "]);return Se=function(){return e},e}var Oe=function(e){function t(){var e,n;Object(h.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(d.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={hostsWithPickups:[]},n.resolveTitle=function(e,t,n){return Object(ke.a)(Se(),void 0!==e?"Vehicle ".concat(e+1):"",t,n)},n}return Object(p.a)(t,e),Object(v.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=(t.settings,t.solution),a=(t.setShowRoutes,n.status,n.hosts),c=(n.vehicles,this.state.hostsWithPickups);return r.a.createElement("div",{className:"ScheduleTable"},r.a.createElement("div",{className:"ScheduleTable-Header"},r.a.createElement("div",{className:"ScheduleTable-HeaderCol"},"Host"),Array.from({length:20},(function(e,t){return r.a.createElement("div",{key:"header-".concat(t),className:"ScheduleTable-HeaderCol",style:t%5===4?{borderRight:"4px solid black"}:null},"".concat(R(t)," W").concat(Math.floor(t/5)+1))}))),r.a.createElement("div",{className:"ScheduleTable-Content"},r.a.createElement("div",{className:"ScheduleTable-HostColumn"},a.reduce((function(e,t,n){return void 0===e.find((function(e){return e.host===t.host}))&&e.push(t),e}),[]).map((function(e,t){return r.a.createElement("div",{key:"host-cell-".concat(t),className:"ScheduleTable-HostCell"},e.host)}))),Array.from({length:20},(function(t,n){return r.a.createElement("div",{className:"ScheduleTable-DayColumn"},c.map((function(t){var a,c=t.host,l=t.freq,i=t.pickupPerDay,o=i[n].vehicle.id,u=i[n].vehicle.color;return r.a.createElement("div",(a={title:void 0!==o?"Vehicle ".concat(o):null},Object($.a)(a,"title",e.resolveTitle(o,c,l)),Object($.a)(a,"className","ScheduleTable-HostPickup"),Object($.a)(a,"style",Object(s.a)({content:" ",background:u},n%5===4?{borderRight:"4px solid black"}:{})),a))})))}))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.settings,a=e.solution,r=a.hosts,c=a.vehicles,l=a.vehiclesPerDay,i=n.vehicleColors;return r&&c?{hostsWithPickups:r.reduce((function(e,t,n){var a;return void 0===(a=e.find((function(e){return e.host===t.host})))?e.push({host:t.host,freq:"".concat(t.perMonth).concat(7===t.perMonth?"."+t.perWeek:""),pickupPerDay:Array.from({length:20},(function(e,t){var a=l[t].filter((function(e){return void 0!==c[e].steps.find((function(e){return"job"===e.type&&e.job===n}))})),r=Object(m.a)(a,1)[0];return{vehicle:{id:r,color:void 0!==r&&i[r].DAY}}}))}):a.pickupPerDay=a.pickupPerDay.map((function(e,t){var a=l[t].filter((function(e){return void 0!==c[e].steps.find((function(e){return"job"===e.type&&e.job===n}))})),r=Object(m.a)(a,1)[0],o=void 0!==r&&i[r].DAY;return void 0!==r?{vehicle:{id:r,color:o}}:e})),e}),[])}:null}}]),t}(a.Component),je=Object(i.b)((function(e,t){return{settings:e.settings,solution:e.solution}}),(function(e,t){return{setVehicles:function(t){return e(ve(t))},setWeeks:function(t){return e(se(t))},setDays:function(t){return e(he(t))},setActiveFeatures:function(t){return e(ue(t))},setShowRoutes:function(t){return e(oe(t))}}}))(Oe),Ce=n(15),Fe=n(41),we=(n(51),function(){try{var e=window.localStorage.getItem("state");if(null===e)return;return JSON.parse(e)}catch(t){return}}),Ae=function(e){if(console.log("cleared localstorage",e),e.solution.status===de)return window.localStorage.clear();try{var t=JSON.stringify(e);window.localStorage.setItem("state",t)}catch(n){}},De={activeFeatures:null,activeFilter:re,activeWeeks:null,activeDays:null,activeVehicles:[],showAllRoutes:!1,vehicleColors:[]},Ne={status:de,hosts:[],vehicles:[],vehiclesPerDay:[],vehiclesPerWeek:[]},Ve=Object(Ce.combineReducers)({settings:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:De,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case"SET_SHOW_ROUTES":var r=a.showAllRoutes;return Object(s.a)({},e,{showAllRoutes:r});case"SET_ACTIVE_FEATURES":return Object(s.a)({},e,{activeFeatures:a});case"SET_VEHICLE_COLORS":var c=a.vehicleColors;return Object(s.a)({},e,{vehicleColors:c});case"SET_FILTER":var l=a.activeFilter,i=a.activeWeeks,o=a.activeDays,u=a.activeVehicles;return Object(s.a)({},e,{activeFilter:l,activeWeeks:i,activeDays:o,activeVehicles:u});default:return e}},solution:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ne,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case"SET_STATUS":return Object(s.a)({},e,{status:a.status});case"LOAD_SOLUTION":var r=a.hosts,c=a.vehicles,l=a.vehiclesPerDay,i=a.vehiclesPerWeek;return{status:pe,hosts:r,vehicles:c,vehiclesPerDay:l,vehiclesPerWeek:i};default:return e}}}),Te=function(e,t){return"CLEAR_SOLUTION"===t.type&&(e=void 0),Ve(e,t)},Ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(Ce.createStore)(Te,we()||e,Object(Ce.applyMiddleware)(Fe.a));return t.subscribe((function(){return Ae(t.getState())})),t}();l.a.render(r.a.createElement(i.a,{store:Ie},r.a.createElement(o.a,{basename:"/"},r.a.createElement(u.c,null,r.a.createElement(u.a,{path:"/table",component:je}),r.a.createElement(u.a,{path:"/",exact:!0,component:be})))),document.getElementById("root"))}},[[56,1,2]]]);
//# sourceMappingURL=main.bf2afc88.chunk.js.map